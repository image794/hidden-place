<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ù–∞–π–¥–∏ 18 –ø—Ä–µ–¥–º–µ—Ç–æ–≤</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      box-sizing: border-box;
      padding: 0;
      margin: 0;
    }

    html, body {
      width: 100%;
      height: 100%;
    }

    body {
      background: #000;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      overflow: hidden; /* –±–µ–∑ —Å–∫—Ä–æ–ª–ª–∞ */
      color: #fff;
    }

    .game {
      width: 100vw;
      height: 100vh;
    }

    .image-container {
      position: relative;
      width: 100%;
      height: 100%;
      /* –¢–£–¢ –ü–û–î–°–¢–ê–í–¨ –°–í–û–ô –§–û–ù: background.jpg –ª–µ–∂–∏—Ç —Ä—è–¥–æ–º —Å index.html */
      background-image: url("background.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
    .top-bar {
      position: absolute;
      top: 10px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 10px;
      pointer-events: none; /* –∫–ª–∏–∫–∞–µ–º —Å–∫–≤–æ–∑—å, –∫—Ä–æ–º–µ –∫–Ω–æ–ø–æ–∫ */
      z-index: 50;
    }

    .top-bar > * {
      pointer-events: auto;
    }

    .pill {
      background: rgba(0, 0, 0, 0.55);
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      padding: 6px 10px;
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }

    .pill-button {
      cursor: pointer;
      transition: background 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
    }

    .pill-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
    }

    .pill-button.active {
      background: rgba(40, 180, 120, 0.9);
      border-color: rgba(189, 255, 220, 0.9);
    }

    .instruction {
      position: absolute;
      top: 50px;
      left: 0;
      right: 0;
      text-align: center;
      font-size: 15px;
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
      padding: 0 10px;
      z-index: 40;
    }

    .items-layer {
      position: absolute;
      inset: 0;
      z-index: 10;
      pointer-events: none; /* –∫–ª–∏–∫–∏ —Ç–æ–ª—å–∫–æ –ø–æ —Å–∞–º–∏–º item */
      transition: opacity 0.6s ease;
    }

    .items-layer.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .item {
      position: absolute;
      transform: translate(-50%, -50%);
      user-select: none;
      -webkit-user-drag: none;
      cursor: pointer;
      pointer-events: auto;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.18),
                  0 8px 18px rgba(0, 0, 0, 0.7);
      background: rgba(0, 0, 0, 0.4);
      transition:
        transform 0.25s ease,
        opacity 0.35s ease,
        box-shadow 0.25s ease,
        filter 0.25s ease;
    }

    .item img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .item:hover {
      transform: translate(-50%, -50%) scale(1.06);
      box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.35),
                  0 12px 26px rgba(0, 0, 0, 0.9);
      filter: brightness(1.05);
    }

    .item.found {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.1) rotate(8deg);
      box-shadow: none;
      pointer-events: none;
    }

    .item.wrong-click {
      animation: shake 0.25s ease;
    }

    @keyframes shake {
      0% { transform: translate(-50%, -50%) translateX(0); }
      25% { transform: translate(-50%, -50%) translateX(-4px); }
      50% { transform: translate(-50%, -50%) translateX(4px); }
      75% { transform: translate(-50%, -50%) translateX(-3px); }
      100% { transform: translate(-50%, -50%) translateX(0); }
    }

    .final-message {
      position: absolute;
      left: 10px;
      right: 10px;
      bottom: 16px;
      padding: 10px 12px;
      font-size: 14px;
      border-radius: 12px;
      background: rgba(22, 120, 70, 0.9);
      border: 1px solid rgba(200, 255, 220, 0.9);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
      display: none;
      z-index: 60;
    }

    .final-message.visible {
      display: block;
    }
  </style>
</head>
<body>
  <div class="game">
    <div class="image-container">
      <!-- –í–µ—Ä—Ö–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã UI -->
      <div class="top-bar">
        <button id="musicToggle" class="pill pill-button">
          –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É üéµ
        </button>
        <div id="counter" class="pill">
          –ù–∞–π–¥–µ–Ω–æ 0 –∏–∑ 18
        </div>
      </div>

      <div class="instruction" id="instruction">
        –ù–∞–∂–∏–º–∞–π –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã, —á—Ç–æ–±—ã –æ–Ω–∏ –∏—Å—á–µ–∑–∞–ª–∏.
      </div>

      <!-- –°–ª–æ–π —Å –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ -->
      <div class="items-layer" id="itemsLayer"></div>

      <!-- –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
      <div class="final-message" id="finalMessage">
        –ë—Ä–∞–≤–æ! üéâ –¢—ã –Ω–∞—à–ª–∞ –≤—Å–µ 18 –ø—Ä–µ–¥–º–µ—Ç–æ–≤. –§–æ–Ω –æ—Ç–∫—Ä—ã—Ç ‚Äî –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–¥–∞–Ω–∏—é.
      </div>
    </div>
  </div>

  <!-- –ú—É–∑—ã–∫–∞ (–ø–æ–ª–æ–∂–∏ —Ä—è–¥–æ–º —Ñ–∞–π–ª music.mp3 –∏–ª–∏ –∏–∑–º–µ–Ω–∏ src) -->
  <audio id="music" loop>
    <source src="music.mp3" type="audio/mpeg" />
  </audio>

  <script>
    /************************************************************
     * –ù–ê–°–¢–†–û–ô–ö–ò –î–õ–Ø –¢–ï–ë–Ø
     ************************************************************/

    // –°–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö / –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö
    const GOOD_COUNT = 18;
    const BAD_COUNT = 82;

    // –ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–∏)
    // –≠—Ç–∏ —Ñ–∞–π–ª—ã —Ç—ã –∫–ª–∞–¥—ë—à—å —Ä—è–¥–æ–º —Å index.html
    const GOOD_IMAGES = [
      "good1.jpg", "good2.jpg", "good3.jpg", "good4.jpg",
      "good5.jpg", "good6.jpg", "good7.jpg", "good8.jpg",
      "good9.jpg", "good10.jpg","good11.jpg","good12.jpg",
      "good13.jpg","good14.jpg","good15.jpg","good16.jpg",
      "good17.jpg","good18.jpg"
    ];

    // –ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏
    const BAD_IMAGES = Array.from({ length: BAD_COUNT }, (_, i) => `bad${i + 1}.jpg`);

    // –ï—Å–ª–∏ —É —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç 100 —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ ‚Äî –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ:
    // –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –∏ –≤–ø–∏—Å–∞—Ç—å –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–æ
    // –≤ –º–∞—Å—Å–∏–≤—ã GOOD_IMAGES –∏ BAD_IMAGES.

    /************************************************************
     * –õ–û–ì–ò–ö–ê –ò–ì–†–´
     ************************************************************/

    const itemsLayer = document.getElementById("itemsLayer");
    const counterEl = document.getElementById("counter");
    const finalMessage = document.getElementById("finalMessage");
    const instructionEl = document.getElementById("instruction");
    const music = document.getElementById("music");
    const musicToggle = document.getElementById("musicToggle");

    let foundGood = 0;
    const totalGood = GOOD_COUNT;

    function updateCounter() {
      counterEl.textContent = `–ù–∞–π–¥–µ–Ω–æ ${foundGood} –∏–∑ ${totalGood}`;
    }

    // –°–æ–∑–¥–∞—ë–º –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (—Å —Ç–∏–ø–æ–º good / bad)
    const itemsData = [];

    for (let i = 0; i < GOOD_COUNT; i++) {
      itemsData.push({
        type: "good",
        src: GOOD_IMAGES[i % GOOD_IMAGES.length] || GOOD_IMAGES[0],
      });
    }

    for (let i = 0; i < BAD_COUNT; i++) {
      itemsData.push({
        type: "bad",
        src: BAD_IMAGES[i % BAD_IMAGES.length] || BAD_IMAGES[0],
      });
    }

    // –†–∞—Å—Å—Ç–∞–≤–ª—è–µ–º 100 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø–æ —Å–µ—Ç–∫–µ 10x10 –ø–æ –í–°–ï–ú–£ —ç–∫—Ä–∞–Ω—É
    function createItems() {
      const rows = 10;
      const cols = 10;
      const totalCells = rows * cols; // 100

      // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –≤–¥—Ä—É–≥ itemsData –º–µ–Ω—å—à–µ/–±–æ–ª—å—à–µ 100
      const count = Math.min(itemsData.length, totalCells);

      for (let i = 0; i < count; i++) {
        const data = itemsData[i];

        const row = Math.floor(i / cols);
        const col = i % cols;

        const cellWidth = 100 / cols;
        const cellHeight = 100 / rows;

        // –ù–µ–º–Ω–æ–≥–æ —Ö–∞–æ—Å–∞ –≤ –ø–æ–∑–∏—Ü–∏–∏, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ —Å–µ—Ç–∫–µ
        const jitterX = (Math.random() - 0.5) * 0.5 * cellWidth;   // ¬±25% —à–∏—Ä–∏–Ω—ã –∫–ª–µ—Ç–∫–∏
        const jitterY = (Math.random() - 0.5) * 0.5 * cellHeight;  // ¬±25% –≤—ã—Å–æ—Ç—ã –∫–ª–µ—Ç–∫–∏

        const xPercent = (col + 0.5) * cellWidth + jitterX;
        const yPercent = (row + 0.5) * cellHeight + jitterY;

        // –†–∞–∑–º–µ—Ä ‚Äî –æ—Ç 13% –¥–æ 22% —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞
        const sizePercent = 13 + Math.random() * 9;

        const itemEl = document.createElement("div");
        itemEl.className = "item";
        itemEl.dataset.type = data.type;

        itemEl.style.left = `${xPercent}%`;
        itemEl.style.top = `${yPercent}%`;
        itemEl.style.width = `${sizePercent}%`;
        itemEl.style.aspectRatio = "1 / 1";

        const img = document.createElement("img");
        img.src = data.src;
        img.alt = data.type === "good" ? "–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç" : "–õ–∏—à–Ω–∏–π –ø—Ä–µ–¥–º–µ—Ç";

        itemEl.appendChild(img);
        itemsLayer.appendChild(itemEl);

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞
        itemEl.addEventListener("click", () => {
          if (itemEl.classList.contains("found")) return;

          if (data.type === "good") {
            itemEl.classList.add("found");
            foundGood++;
            updateCounter();

            if (foundGood === totalGood) {
              // –í—Å–µ 18 –Ω–∞–π–¥–µ–Ω—ã
              instructionEl.textContent = "–í—Å–µ –Ω–∞–π–¥–µ–Ω–æ! –§–æ–Ω –æ—Ç–∫—Ä—ã—Ç üéâ";
              itemsLayer.classList.add("hidden");
              finalMessage.classList.add("visible");
            } else {
              instructionEl.textContent = "–û—Ç–ª–∏—á–Ω–æ! –ò—â–∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã‚Ä¶";
            }
          } else {
            // –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç ‚Äî —á—É—Ç—å –ø–æ—Ç—Ä—è—Å—Ç–∏
            itemEl.classList.remove("wrong-click");
            void itemEl.offsetWidth; // –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é
            itemEl.classList.add("wrong-click");
          }
        });
      }
    }

    createItems();
    updateCounter();

    // –ú—É–∑—ã–∫–∞
    let musicOn = false;

    musicToggle.addEventListener("click", async () => {
      try {
        if (!musicOn) {
          await music.play();
          musicOn = true;
          musicToggle.classList.add("active");
          musicToggle.textContent = "–í—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É üîá";
        } else {
          music.pause();
          musicOn = false;
          musicToggle.classList.remove("active");
          musicToggle.textContent = "–í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É üéµ";
        }
      } catch (e) {
        console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º—É–∑—ã–∫—É:", e);
      }
    });
  </script>
</body>
</html>
